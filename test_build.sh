#!/bin/bash -e

RSA_PRIV="$(cat <<-EOF
-----BEGIN RSA PRIVATE KEY-----
MIIEogIBAAKCAQEAynwM8PCIaUcUWz1UjwdGM+OYiupeMFJ92pD/O6TDivsxEbPQ
RL09TDoHJixamo8dPx2to9+bTyQ7TdiThcG/K46VR4zGqzy3FrfVMbfxEL091ayl
JKEWug1TMpskolBMwJRcgWwcH0eyFI6rrxMiJY9QxphzgrDe/h4l53y3Y/7h+GOM
P0Nbdp0Dr4Gjjp5La+mptSD55lWe0cCntQ4np3/ORZVizhzXbQU/BOMSn4JWeHT1
ET/oeO2WAR+3ySFsp2TMt+gCrek230FQAltHkpEltlFaPVB9Dh0rTVjI43OpBmvJ
h7U+NZtlDW2+Kx1Fjf0ZiHGcIi/nzDXM289lqQIDAQABAoIBABNF531vh6xtpZRh
rBDJIneB7F0cncZ/s5cAQisNLcemzS7gLKy+Tn1Y8KFDi4Q2pxQA4Sw99mx8CGEK
glAy9t1QfwkGb0qRRuQUr2hCF+H+AUq7WiS4aI9hAVBJ0BzbA9M4y+1NuweHLX4j
blgFvDRTBd9BV41TBIavm/ACwPn1d1mCQkVweehpes4cj2yvuVMCBV1TItchrWbC
DJ6/qD3yG6wj2uDMx2PmapG84CAHNsXeEASHjMSjKYrjkmS41Um3PsHzKxRR6BDA
cATx2aya7A6I7/CoBc0DERzfy2AE5LLBWC2aOWzDwhsxBCTXDamTtX+yi8BgWyIL
oEOlwQECgYEA9Yoj74HLQYpsGbxgR95gwuJps070XGoPti9l8WYI+TKAiWA4BXkZ
uE1J0/X6JonQ9nwLs/55VWOORkglssq3iyh+lKnVzOfrjPuL/DZa4+peoKiANJ7v
IL5NtPSONbM0BW3i3/OES+fiwM+6/wiOEg7t6a16QExpqL9MMXJAt1kCgYEA0xxZ
4tjFMut6PcSJSZSIeEF2bRwzqsViChqe3LAwUEoOYxcfhLPTbTvkhRINNMS1nC/B
5xeNzkD1V4SQvlAcz0B/mkC3TtP8VaafN4Fl+dcfCknGYBMYnv+VwbJM/GtqXz1Y
SMABDZhH/tDROYTB0oltSSjbJYs+WI9ifqIGptECgYBE9aUeEQ/qulud5sALrzLx
yPDywQv0IH2FJ060O3ntsvdSncleECLfFiXT99Nnm3EqqLAIv0GIb8t3ha/AxRpD
ZP4X9pLrV39aOxOXpBRmyl4FNQ28uZ5jTc85MS33evrzQ2diilvvjZKroCvekKKG
A9dht60L/en20LMvd+0hEQKBgFGYGZ21zrIZlUueVLmdsQlZs94EEmwkkfn5xADk
EChYFytxWns9za/ggDh2e6gzh0Xwp28cCXD4ZlsHH7KO4DOyaB9EeBT9lf+8wLkB
SFrCLHsbfJLRjqiVfFo7Acpl8d0RprenjkCk5N618sfaaddnyleGdP0TzmsIMDdl
hFChAoGAanuBHDvQRzG487ZpvvWBnR5KMf25jP1WE/G+XA5KwJBJCrMQFeOSFrEz
hPknas/Bi4l+QhyNTvkGOa9sBXp5UrTuVZDKfnTQb+7pbSBbKeJu/uDpXEuEKq1L
iv9c10zIfQ+7lAshFRHq3wbYCje+2BXMVnxyg+FEVCWsO88yP/k=
-----END RSA PRIVATE KEY-----
EOF
)"
export _RSA_PRIVATE="${_RSA_PRIVATE:-"${RSA_PRIV}"}"

RSA_PUB="$(cat <<-EOF
-----BEGIN CERTIFICATE-----
MIIDQjCCAiqgAwIBAgIUZuynjO34FwuppQ0Zce8Q5TAE/yEwDQYJKoZIhvcNAQEL
BQAwWzELMAkGA1UEBhMCVVMxDjAMBgNVBAgMBVRleGFzMREwDwYDVQQHDAhTSG91
c3RvbjEUMBIGA1UECgwLVGVrbm9pciBMTEMxEzARBgNVBAMMCnRla25vaXIuYWkw
HhcNMjAwNTI4MTAxMTA2WhcNMzAwNTI2MTAxMTA2WjBbMQswCQYDVQQGEwJVUzEO
MAwGA1UECAwFVGV4YXMxETAPBgNVBAcMCFNIb3VzdG9uMRQwEgYDVQQKDAtUZWtu
b2lyIExMQzETMBEGA1UEAwwKdGVrbm9pci5haTCCASIwDQYJKoZIhvcNAQEBBQAD
ggEPADCCAQoCggEBAMp8DPDwiGlHFFs9VI8HRjPjmIrqXjBSfdqQ/zukw4r7MRGz
0ES9PUw6ByYsWpqPHT8draPfm08kO03Yk4XBvyuOlUeMxqs8txa31TG38RC9PdWs
pSShFroNUzKbJKJQTMCUXIFsHB9HshSOq68TIiWPUMaYc4Kw3v4eJed8t2P+4fhj
jD9DW3adA6+Bo46eS2vpqbUg+eZVntHAp7UOJ6d/zkWVYs4c120FPwTjEp+CVnh0
9RE/6HjtlgEft8khbKdkzLfoAq3pNt9BUAJbR5KRJbZRWj1QfQ4dK01YyONzqQZr
yYe1PjWbZQ1tvisdRY39GYhxnCIv58w1zNvPZakCAwEAATANBgkqhkiG9w0BAQsF
AAOCAQEAJKlTReHNUgGG1zkoCaEbTfuchF0wFrjVuJt+IDnzRdk4nBnVChSPOT+A
UYBw0DN1xitCcRN3IzS/qU/4nFKaUnLBt1NhuLPA7Gp+p9Xht0qh5zsA2hVvAGXh
DbxfOHdasEdAWTSmfiKQsntUWfZfxmoJ52gpcVK5foKOr3/vOhFe7h3rkpmbB159
5DA4dUftL1YAKsBZfe6hQakvp18T2aFCJwhp4phzHHJJeIEK5X0VqfmfDFKBZozJ
I65F9NSg213CwsHhTq7OYmKtu0H8TN+p34+tRujZnwbqzPwanIxfMoFPME3sm9pw
SeiB4M+rWJJ5n4oDOHaXpe4XJRfeHg==
-----END CERTIFICATE-----
EOF
)"
export _RSA_PUBLIC="${_RSA_PUBLIC:-"${RSA_PUB}"}"

export _GCP_PROJECT=teknoir
export _IOT_REGISTRY=anders
export _DEVICE_ID=raspberrypi4
export _TARGET_HOSTNAME=raspberrypi4
export _WPA_ESSID=silverapple
export _WPA_PASSWORD=Y34rz3r0
export _WPA_COUNTRY=SE
export _ENABLE_SSH=1
export _FIRST_USER_NAME=teknoir
export _FIRST_USER_PASS=raspberry

./build.sh
